!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://s3.cn-north-1.amazonaws.com.cn/assets.xmind.cn/www/",n(n.s=115)}([function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,o){var c=typeof(e=e||{}).default;"object"!==c&&"function"!==c||(e=e.default);var u,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId=a),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=u):i&&(u=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var d=l.render;l.render=function(e,t){return u.call(t),d(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inheritAttrs:!1,props:["value","isLoading","disabled","size","width"],computed:{theSize:function(){return this.size?this.size:"normal"},theHeight:function(){switch(this.theSize){case"large":return"56px";default:return"41px"}},theWidth:function(){if(/\d+px$/.test(this.width))return this.width}},mounted:function(){var e=$(this.$el);console.log("$el ->",e),e.find(".btn").css("width",e.width())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xm-submit-button position-relative",class:{"w-100":"100%"===e.width}},[n("input",e._b({staticClass:"btn btn-primary",class:{"btn-lg":"large"===e.theSize,"w-100":"100%"===e.width},style:{height:e.theHeight,"min-width":e.theWidth},attrs:{type:"submit",disabled:void 0===e.disabled?e.isLoading:e.disabled},domProps:{value:e.isLoading?"":e.value}},"input",e.$attrs,!1)),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loading"},[n("div"),e._v(" "),n("div"),e._v(" "),n("div"),e._v(" "),n("div")])])},i=[]},,,function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,a=e[1]||"",s=e[3];if(!s)return a;if(t&&"function"==typeof btoa){var o=(n=s,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),c=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot).concat(e," */")}));return[a].concat(c).concat([o]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var o=e[s];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="(".concat(o[2],") and (").concat(n,")")),t.push(o))}},t}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],s=a[0],o={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};r[s]?r[s].parts.push(o):n.push(r[s]={id:s,parts:[o]})}return n}n.r(t),n.d(t,"default",(function(){return p}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},s=i&&(document.head||document.getElementsByTagName("head")[0]),o=null,c=0,u=!1,l=function(){},d=null,f="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,i){u=n,d=i||{};var s=r(e,t);return h(s),function(t){for(var n=[],i=0;i<s.length;i++){var o=s[i];(c=a[o.id]).refs--,n.push(c)}for(t?h(s=r(e,t)):s=[],i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete a[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=a[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(g(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(i=0;i<n.parts.length;i++)s.push(g(n.parts[i]));a[n.id]={id:n.id,refs:1,parts:s}}}}function v(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+f+'~="'+e.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(m){var i=c++;r=o||(o=v()),t=w.bind(null,r,i,!1),n=w.bind(null,r,i,!0)}else r=v(),t=function(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(f,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function w(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}},,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);var s=n(2),o=n(0),c=Object(o.a)(i.a,s.a,s.b,!1,(function(e){n(16)}),null,null);t.default=c.exports},function(e,t,n){var r=n(17);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(6).default)("4b5e7be3",r,!0,{})},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"\n.xm-color-g10{color:#fcfcfc\n}\n.xm-color-g20{color:#f9f9f9\n}\n.xm-color-g30{color:#ebebeb\n}\n.xm-color-g40{color:#d6d6d6\n}\n.xm-color-g50{color:#b2b2b2\n}\n.xm-color-g60{color:#8c8c8c\n}\n.xm-color-g70{color:#666\n}\n.xm-color-g80{color:#2b2b2b\n}\n.xm-color-g90{color:#111\n}\n.xm-submit-button{display:inline-block;margin-top:1.5rem;margin-bottom:1.5rem\n}\n",""])},function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="day",a="week",s="month",o="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})(.*?(\d{1,2}):(\d{1,2}):(\d{1,2}))?.?(\d{1,3})?$/,u=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},f={padStart:d,padZoneStr:function(e){var t=Math.abs(e),n=Math.floor(t/60),r=t%60;return(e<=0?"+":"-")+d(n,2,"0")+":"+d(r,2,"0")},monthDiff:function(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months"),i=t-r<0,a=e.clone().add(n+(i?-1:1),"months");return Number(-(n+(t-r)/(i?r-a:a-r)))},absFloor:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},prettyUnit:function(c){return{M:s,y:o,w:a,d:i,h:r,m:n,s:t,ms:e}[c]||String(c||"").toLowerCase().replace(/s$/,"")},isUndefined:function(e){return void 0===e}},m="en",p={};p[m]=l;var h=function(e){return e instanceof w},v=function(e,t,n){var r;if(!e)return null;if("string"==typeof e)p[e]&&(r=e),t&&(p[e]=t,r=e);else{var i=e.name;p[i]=e,r=i}return n||(m=r),r},g=function(e,t){if(h(e))return e.clone();var n=t||{};return n.date=e,new w(n)},_=function(e,t){return g(e,{locale:t.$L})},b=f;b.parseLocale=v,b.isDayjs=h,b.wrapper=_;var w=function(){function l(e){this.parse(e)}var d=l.prototype;return d.parse=function(e){var t,n;this.$d=null===(t=e.date)?new Date(NaN):b.isUndefined(t)?new Date:t instanceof Date?t:"string"==typeof t&&/.*[^Z]$/i.test(t)&&(n=t.match(c))?new Date(n[1],n[2]-1,n[3]||1,n[5]||0,n[6]||0,n[7]||0,n[8]||0):new Date(t),this.init(e)},d.init=function(e){this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds(),this.$L=this.$L||v(e.locale,null,!0)||m},d.$utils=function(){return b},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0},d.$compare=function(e){return this.valueOf()-g(e).valueOf()},d.isSame=function(e){return 0===this.$compare(e)},d.isBefore=function(e){return this.$compare(e)<0},d.isAfter=function(e){return this.$compare(e)>0},d.year=function(){return this.$y},d.month=function(){return this.$M},d.day=function(){return this.$W},d.date=function(){return this.$D},d.hour=function(){return this.$H},d.minute=function(){return this.$m},d.second=function(){return this.$s},d.millisecond=function(){return this.$ms},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(e,c){var u=this,l=!!b.isUndefined(c)||c,d=function(e,t){var n=_(new Date(u.$y,t,e),u);return l?n:n.endOf(i)},f=function(e,t){return _(u.toDate()[e].apply(u.toDate(),l?[0,0,0,0].slice(t):[23,59,59,999].slice(t)),u)};switch(b.prettyUnit(e)){case o:return l?d(1,0):d(31,11);case s:return l?d(1,this.$M):d(0,this.$M+1);case a:return d(l?this.$D-this.$W:this.$D+(6-this.$W),this.$M);case i:case"date":return f("setHours",0);case r:return f("setMinutes",1);case n:return f("setSeconds",2);case t:return f("setMilliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(i,a){switch(b.prettyUnit(i)){case"date":this.$d.setDate(a);break;case s:this.$d.setMonth(a);break;case o:this.$d.setFullYear(a);break;case r:this.$d.setHours(a);break;case n:this.$d.setMinutes(a);break;case t:this.$d.setSeconds(a);break;case e:this.$d.setMilliseconds(a)}return this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.add=function(e,c){var u=this;e=Number(e);var l,d=b.prettyUnit(c),f=function(t,n){var r=u.set("date",1).set(t,n+e);return r.set("date",Math.min(u.$D,r.daysInMonth()))};if(d===s)return f(s,this.$M);if(d===o)return f(o,this.$y);switch(d){case n:l=6e4;break;case r:l=36e5;break;case i:l=864e5;break;case a:l=6048e5;break;case t:l=1e3;break;default:l=1}var m=this.valueOf()+e*l;return _(m,this)},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(e){var t=this,n=e||"YYYY-MM-DDTHH:mm:ssZ",r=b.padZoneStr(this.$d.getTimezoneOffset()),i=this.$locale(),a=i.weekdays,s=i.months,o=function(e,t,n,r){return e&&e[t]||n[t].substr(0,r)};return n.replace(u,(function(e){if(e.indexOf("[")>-1)return e.replace(/\[|\]/g,"");switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return String(t.$y);case"M":return String(t.$M+1);case"MM":return b.padStart(t.$M+1,2,"0");case"MMM":return o(i.monthsShort,t.$M,s,3);case"MMMM":return s[t.$M];case"D":return String(t.$D);case"DD":return b.padStart(t.$D,2,"0");case"d":return String(t.$W);case"dd":return o(i.weekdaysMin,t.$W,a,2);case"ddd":return o(i.weekdaysShort,t.$W,a,3);case"dddd":return a[t.$W];case"H":return String(t.$H);case"HH":return b.padStart(t.$H,2,"0");case"h":case"hh":return 0===t.$H?12:b.padStart(t.$H<13?t.$H:t.$H-12,"hh"===e?2:1,"0");case"a":return t.$H<12?"am":"pm";case"A":return t.$H<12?"AM":"PM";case"m":return String(t.$m);case"mm":return b.padStart(t.$m,2,"0");case"s":return String(t.$s);case"ss":return b.padStart(t.$s,2,"0");case"SSS":return b.padStart(t.$ms,3,"0");case"Z":return r;default:return r.replace(":","")}}))},d.diff=function(e,c,u){var l=b.prettyUnit(c),d=g(e),f=this-d,m=b.monthDiff(this,d);switch(l){case o:m/=12;break;case s:break;case"quarter":m/=3;break;case a:m=f/6048e5;break;case i:m=f/864e5;break;case r:m=f/36e5;break;case n:m=f/6e4;break;case t:m=f/1e3;break;default:m=f}return u?m:b.absFloor(m)},d.daysInMonth=function(){return this.endOf(s).$D},d.$locale=function(){return p[this.$L]},d.locale=function(e,t){var n=this.clone();return n.$L=v(e,t,!0),n},d.clone=function(){return _(this.toDate(),this)},d.toDate=function(){return new Date(this.$d)},d.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},d.toJSON=function(){return this.toISOString()},d.toISOString=function(){return this.toDate().toISOString()},d.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},d.toString=function(){return this.$d.toUTCString()},l}();return g.extend=function(e,t){return e(t,w,g),g},g.locale=v,g.en=p[m],g}()},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(18))&&r.__esModule?r:{default:r};t.default={filters:{reFormatTime:function(e){return"cn"===window.lang?(0,i.default)(e,{locale:"zh-cn"}).format("YYYY年MMMD日"):(0,i.default)(e).format("MMMM D, YYYY")}},isAutoRenewAble:function(e){return e&&["paypal","stripe","apple_pay"].includes(e)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}Object.defineProperty(t,"__esModule",{value:!0});var i={t:function(e){return e}};function a(e,t){var n=this,i=e.confirmAction,a=e.cancelAction,s=e.closeAction;return delete e.confirmAction,delete e.cancelAction,new Promise((function(o){var c=new utils.Dialog(Object.assign({title:"对话框",confirmText:"确定",cancelText:"取消",confirmAction:function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.hide(),!i){e.next=4;break}return e.next=4,i();case 4:o(!0);case 5:case"end":return e.stop()}}),e,n)})));return function(){return e.apply(this,arguments)}}(),cancelAction:function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.hide(),!i){e.next=4;break}return e.next=4,a();case 4:o(!1);case 5:case"end":return e.stop()}}),e,n)})));return function(){return e.apply(this,arguments)}}(),closeAction:function(){var e=r(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hide(),!i){e.next=4;break}return e.next=4,s();case 4:o(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},e));c.show(),"function"==typeof t&&t(c)}))}r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,loadI18nextAsync(["account"]);case 2:i=e.sent;case 3:case"end":return e.stop()}}),e,void 0)})))(),t.default={accountTransfering:function(e,t){return a({title:"XMind 账号迁移",contents:["确认迁移代表您已知悉账号迁移相关内容。",'迁移完成后将开始使用 XMind 中文(<a href="https://www.xmind.cn">https://www.xmind.cn</a>)服务。',"确认信息：<br/> 账号邮箱："+e+"<br/> 手机号："+t,"*账号迁移操作不可逆，迁移完成后不支持迁回。","*迁移完成后请在客户端内重新登录 XMind ID。"],confirmText:"账号迁移中...",cancelText:"留在当前页",hideCancel:!0},(function(e){return e.loading()}))},accountTransferConfirm:function(e,t,n){return a({title:"XMind 账号迁移",contents:["确认迁移代表您已知悉账号迁移相关内容。",'迁移完成后将开始使用 XMind 中文(<a href="https://www.xmind.cn">https://www.xmind.cn</a>)服务。',"确认信息：<br/> 账号邮箱："+e+"<br/> 手机号："+t,"*账号迁移操作不可逆，迁移完成后不支持迁回。","*迁移完成后请在客户端内重新登录 XMind ID。"],confirmText:"确认迁移",cancelText:"留在当前页",confirmAction:n})},accountTransferFailedWithSubscription:function(){return a({title:"账号无法迁移",contents:["由于您有正在订阅中的产品，无法进行账号迁移。",'您可前往 XMind 中文官网（<a href="https://www.xmind.cn">https://www.xmind.cn</a>） 注册新账号体验 XMind 中文服务。'],confirmText:"确认",cancelText:"留在当前页"})},accountTransferFailed:function(){return a({title:"账号无法迁移",contents:["账号迁移发生错误。"],confirmText:"确认",cancelText:"留在当前页"})},accountTransferCompleted:function(){var e=this;return a({title:"账号迁移完成",contents:["确认迁移代表您已知悉账号迁移相关内容。",'迁移完成后将开始使用 XMind 中文(<a href="https://www.xmind.cn">https://www.xmind.cn</a>)服务。',"","*账号迁移操作不可逆，迁移完成后不支持迁回。","*迁移完成后请在客户端内重新登录 XMind ID。"],confirmText:"前往 xmind.cn 登录",cancelText:"留在当前页",hideCancel:!0,confirmAction:function(){var t=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$acc.signOut(),window.location="https://www.xmind.cn/signin/";case 2:case"end":return e.stop()}}),t,e)})));return function(){return t.apply(this,arguments)}}()})},managementDeactivatedDevice:function(e,t){var n=this,a=new utils.Dialog({title:i.t("account._logout_selected"),contents:[i.t("account._device_name")+t,i.t("account._r_u_sure_to_logout_the_selected_device")],confirmText:i.t("account._logout"),cancelText:i.t("account.Cancel"),confirmAction:function(){var t=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.showLoading(),t.next=3,api.deactivateDevice(e);case 3:a.hideLoading(),location.reload();case 5:case"end":return t.stop()}}),t,n)})));return function(){return t.apply(this,arguments)}}(),cancelAction:function(){a.hide()}});a.show()},managementCancelSubscription:function(e,t,n){var a=this,s=new utils.Dialog({title:i.t("account._cancel_auto_renewal"),contents:["cn"===lang?"取消续费后于 "+e+" 之前，仍然可以继续使用相应产品服务。":"After canceling the renewal, the product and service can still be used until "+e+".",i.t("account._no_fees_will_be_charged_after_expires")],confirmText:i.t("account._cancel_auto_renewal"),cancelText:i.t("account._stay_in_xmind"),confirmAction:function(){var e=r(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.showLoading(),e.next=3,api.cancelSubscription(t,n);case 3:r=e.sent,s.hideLoading(),200===r._code?(utils.toast.show(i.t("account.Succeed")),location.reload()):s.update({contents:[r.msg],confirmText:i.t("account.Confirm"),confirmAction:function(){s.hide()}});case 6:case"end":return e.stop()}}),e,a)})));return function(){return e.apply(this,arguments)}}(),cancelAction:function(){s.hide()}});s.show()},teamSubscriptionInvite:function(e){var t=this;return new Promise((function(n){var a=$('<input placeholder="'+i.t("account.Email Address")+'" class="form-control"/>'),s=$('<div class="invalid-feedback"></div>'),o=$('<div class="input-group"></div>');new utils.Dialog({title:i.t("account._invite"),contents:[i.t("account._enter_email_to_invite_member"),o.append(a).append(s)],confirmText:i.t("account._sent_invitation"),cancelText:i.t("account.Cancel"),isLoadingAnimated:!0,confirmAction:function(){var o=r(regeneratorRuntime.mark((function r(o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=a.val(),utils.regex.email.test(c)){t.next=5;break}return a.addClass("is-invalid"),s.text(i.t("account._failed_invalid_email")),t.abrupt("return");case 5:return o.showLoading(),t.next=8,e(c);case 8:o.hideLoading(),o.hide(),n(c);case 11:case"end":return t.stop()}}),r,t)})));return function(e){return o.apply(this,arguments)}}(),cancelAction:function(e){e.hide(),n(void 0)},closeAction:function(e){e.hide(),n(void 0)}}).show()}))},teamSubscriptionRevokeAccess:function(e){var t=i.t("account._member_will_no_loger_to_user_after_removed");return a({title:i.t("account._remove_member"),contents:[t.replace(/{{\s*email\s*}}/,e)],confirmText:i.t("account.Remove"),cancelText:i.t("account.Cancel")})},teamSubscriptionDeleteConfirm:function(){return a({title:i.t("account._deleteTeamConfirm._title"),contents:[i.t("account._deleteTeamConfirm._desc1"),i.t("account._deleteTeamConfirm._desc2")],confirmText:i.t("account._deleteTeamConfirm._btn1"),cancelText:i.t("account._deleteTeamConfirm._btn2")})},teamSubscriptionLeavingConfirm:function(){return a({title:i.t("account._leavingTeamConfirm._title"),contents:[i.t("account._leavingTeamConfirm._desc1"),i.t("account._leavingTeamConfirm._desc2")],confirmText:i.t("account._leavingTeamConfirm._btn1"),cancelText:i.t("account._leavingTeamConfirm._btn2")})},deleteAccountWarningConfirm:function(){return a({title:i.t("account._dissolve_multi_user_subscription"),contents:[i.t("account._what_will_be_happened_if_admin_deletes_xmind_id"),i.t("account._all_members_will_be_removed_from_multi_user_subscriptions")],confirmText:i.t("account.Continue"),cancelText:i.t("account.Cancel")})},deleteAccount:function(e){var t=this;return new Promise((function(n){var a=$('<input placeholder="'+i.t("account.Password")+'" type="password" class="form-control"/>'),s=$('<div class="invalid-feedback"></div>'),o=$('<div class="input-group"></div>'),c=new utils.Dialog({title:i.t("account._delete_account_permanently"),contents:[i.t("account._verify_password_4_deleting"),o.append(a).append(s)],confirmText:i.t("account._yes_delete_my_account"),cancelText:i.t("account.Cancel"),isLoadingAnimated:!0,confirmAction:function(){var o=r(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.showLoading(),t.next=3,e(a.val(),c);case 3:(o=t.sent)?c.hide():(a.addClass("is-invalid"),s.text(i.t("account.Incorrect password"))),c.hideLoading(),n(o);case 7:case"end":return t.stop()}}),r,t)})));return function(){return o.apply(this,arguments)}}(),cancelAction:function(){c.hide(),n(void 0)},closeAction:function(){c.hide(),n(void 0)}});c.show()}))},deleteAccountCompleted:function(){new utils.Dialog({contents:[i.t("account._account_deleted")],confirmText:i.t("account._back_2_home"),hideCancel:!0,hideClose:!0,confirmAction:function(){return window.location.href="/"}}).show()}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(15))&&r.__esModule?r:{default:r};t.default={components:{"xm-submit-button":i.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=a(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o[t]){e.next=18;break}return e.prev=1,e.t0=c,e.t1=o[t],e.next=6,$.get(o[t].address.replace("*",n));case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 10:return e.prev=10,e.t3=e.catch(1),console.log(e.t3),e.next=15,i(t+1,n);case 15:return e.abrupt("return",e.sent);case 16:e.next=19;break;case 18:throw new Error("all api provider failed to locate.");case 19:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e,t){return r.apply(this,arguments)});function a(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var s,o=[{address:"https://extreme-ip-lookup.com/json/*",reflect:{country:"country",city:"city"}}];function c(e,t){var n=e.reflect,r={};return Object.keys(n).forEach((function(e){return r[e]=function(e,t){for(var n=t.split("."),r=e;n.length;)if(!(r=r[n.shift()]))return r;return r}(t,n[e])})),r}t.getGeoIP=(s=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||"",e.next=3,i(0,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.buttonCD=(r={},{bind:i=function(e,t){if(!e.id)throw"The id of button is required";if(t.value!==t.oldValue){var n="buttonCD."+e.id;r[n]||(r[n]={isDisabled:e.disabled,innerHTML:e.innerHTML,innerText:e.innerText,style:e.style});var i=r[n];i&&i.intervalId&&window.clearInterval(i.intervalId);var a,s=Number(Cookies.get(n))||0,o=Date.now()/1e3<<0;s!==(a=0===t.value||t.value&&t.value.constructor===Number&&t.value>0?o+t.value:s)&&Cookies.set(n,a);var c=i.innerText.trim(),u=a-o,l=function(t){if(u>0){if(!i.maxWidth){e.innerText=c+" ("+u.toString().replace(/\d/g,"8")+"s)";var r=getComputedStyle(e).width;e.style.width=r,i.maxWidth=r}e.disabled=!0,e.style.whiteSpace="nowrap",e.innerText=c+" ("+u+"s)",u--}else window.clearInterval(i.intervalId),Cookies.remove(n),e.disabled=i.isDisabled,e.style=i.style,e.innerHTML=i.innerHTML};i.intervalId=setInterval((function(){return l()}),1e3),l()}},update:i,unbind:function(e,t){var n="buttonCD."+e.id,i=r[n];window.clearInterval(i.intervalId),r[n]=null}}),t.buttonLoading=function(){var e={};return function(t,n){if(!t.id)throw"The id of button is required";if(n.value!==n.oldValue&&void 0!==n.oldValue){var r=t.id;e[r]||(e[r]={isDisabled:t.disabled,innerHTML:t.innerHTML,innerText:t.innerText,style:t.style});var i=e[r];n.value?(t.style.width=getComputedStyle(t).width,t.style.position="relative",t.disabled=!0,t.innerHTML='\n    <div>\n        <span>&nbsp;</span>\n        <div class="waiting loading">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n    </div>\n    '):(t.disabled=i.isDisabled,t.innerHTML=i.innerHTML,t.style=i.style)}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={uid:"",user:"",cloud_site:"cn",expired:!0,subscription:!1,expireDate:0,emailhash:"",userid:0,fullname:"",type:null,phone_status:"not-verified",company:"",head_pic:"https://s3.cn-north-1.amazonaws.com.cn/assets.xmind.cn/img/default-m.png",if_cxm:0,phone:"",primary_email:"",email_status:0,emails:[],sub:{},first_name:"",last_name:"",gender:"",birth_month:1,birth_day:1,birth_year:1970,role:"",workplace:"",aboutme:"",website:"",city:"",province:"",country:"",avatar_url:"",social_accounts:{},last_signin:0};t.default={namespaced:!0,state:{profile:{},avatarBase64TempUploaded:""},getters:{isPrimaryEmailVerified:function(e){return e.profile.emails&&e.profile.emails.some((function(t){return t.email===e.profile.primary_email&&t.valid}))},isDefaultName:function(e){return!e.profile.first_name&&!e.profile.last_name},displayName:function(e){return e.profile.first_name||e.profile.last_name?(e.profile.first_name?e.profile.first_name+" ":"")+(e.profile.last_name?e.profile.last_name:""):e.profile.user},avatar:function(e){var t=e.profile;return e.avatarBase64TempUploaded?e.avatarBase64TempUploaded:t.avatar_url?t.avatar_url:"cn"===window.siteMode?"//s3.cn-north-1.amazonaws.com.cn/assets.xmind.cn/img/default-avatar.png":"//xmindnet.s3.amazonaws.com/img/default-avatar.png"},snapshot:function(e){return Object.assign({},e.profile)}},mutations:{setProfile:function(e,t){var n=!0,i=!1,a=void 0;try{for(var s,o=Object.keys(t)[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value;Vue.set(e.profile,c,t[c])}}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}var u=!0,l=!1,d=void 0;try{for(var f,m=Object.keys(r)[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var p=f.value;void 0===e.profile[p]&&Vue.set(e.profile,p,r[p])}}catch(e){l=!0,d=e}finally{try{!u&&m.return&&m.return()}finally{if(l)throw d}}},setAvatar:function(e,t){e.avatarBase64TempUploaded=t}},actions:{init:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r=t.commit;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,api.getUserInfo();case 2:401===(n=e.sent)._code&&($acc.signOut(),window.location="/signin/?next="+encodeURI(window.location.href.split("?")[0])),r("setProfile",n);case 5:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))});return function(e){return t.apply(this,arguments)}}()}}},function(e,t,n){"use strict";var r=s(n(116)),i=s(n(130)),a=s(n(135));function s(e){return e&&e.__esModule?e:{default:e}}a.default.dispatch("init"),new Vue({el:"#app",components:{management:i.default,setting:r.default},store:a.default,data:{currentView:""},created:function(){var e=window.location.hash||"#management";"info"!==(e=e.slice(1).split("/").shift())&&"subscription"!==e||(e="setting"),"device"===e&&(e="management"),this.$store.commit("setActivatedView",e)},mounted:function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:utils.getParameterByName("cn_trans")&&(Cookies.set("cn_trans",1),Cookies.set("cn_trans_account",utils.getParameterByName("account"))),(!$acc.isSignin()||utils.getParameterByName("token")&&utils.getParameterByName("token")!==$acc._token)&&$xm.redirect();case 2:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))});return function(){return t.apply(this,arguments)}}()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(117)),i=f(n(118)),a=f(n(119)),s=f(n(120)),o=f(n(121)),c=f(n(122)),u=f(n(123)),l=f(n(126)),d=f(n(127));function f(e){return e&&e.__esModule?e:{default:e}}t.default=Vue.component("setting",{template:"#setting",data:function(){return{currentView:"",isArrowLeftStart:!0,isArrowRightEnd:!1}},components:{"personal-info":u.default,"change-phone-number":c.default,"change-email":a.default,"set-newsletter":s.default,"change-password":o.default,"change-third-part":l.default,"delete-account":i.default,"cn-trans":r.default,"team-subscription":d.default},computed:{shouldTransferAccount:function(){return!!Cookies.get("cn_trans")&&Cookies.get("cn_trans_account")===$acc._account},siteMode:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return siteMode})),isTeamLeader:function(){return this.$store.getters["subscriptions/isTeamLeader"]}},activated:function(){this.currentView=window.location.hash.slice(1).split("/")[1]||"personal-info","cn-trans"!==this.currentView||this.shouldTransferAccount||(this.currentView="personal-info")},methods:{switchSection:function(e){this.currentView=e},reset:function(){this.currentView="personal-info"},goToManagement:function(){window.location.hash="",this.$store.commit("setActivatedView","management")},onMenuScroll:function(){var e=this.$refs.settingMenu;this.isArrowLeftStart=0===e.scrollLeft,this.isArrowRightEnd=e.scrollWidth-(e.scrollLeft+e.clientWidth)==0},scrollTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"right",t=this.$refs.settingMenu;$(t).animate({scrollLeft:t.scrollLeft+("right"===e?200:-200)},500)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(84)),i=a(n(81));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}t.default=Vue.component("",{template:"#cn-trans",mixins:[r.default],computed:Object.assign({profile:function(){return this.$store.getters["profile/snapshot"]}}),data:function(){return{isChecking:!1,emailError:"",phoneError:"",cn_trans_email:"",cn_trans_phone:""}},mounted:function(){window.location.hash="#setting/cn-trans",this.cn_trans_email=this.profile.cn_trans_email,this.cn_trans_phone=this.profile.cn_trans_phone},methods:{startTransfer:function(){var e=s(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(utils.regex.email.test(this.cn_trans_email)){e.next=3;break}return this.emailError="邮箱格式错误",e.abrupt("return");case 3:if(utils.regex.phone.test(this.cn_trans_phone)){e.next=6;break}return this.phoneError="手机号格式错误",e.abrupt("return");case 6:return this.isChecking=!0,e.next=9,api.cn_transferable(this.cn_trans_email);case 9:if(t=e.sent,n=t._code,r=t.error_code,this.isChecking=!1,200!==n){e.next=20;break}return e.next=16,i.default.accountTransferConfirm(this.cn_trans_email,this.cn_trans_phone);case 16:if(!e.sent){e.next=18;break}return e.abrupt("return",this.transfering());case 18:e.next=21;break;case 20:4031===r?i.default.accountTransferFailedWithSubscription():4032===r?this.emailError="邮箱已被使用":i.default.accountTransferFailed();case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),transfering:function(){var e=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.accountTransfering(this.cn_trans_email,this.cn_trans_phone),e.prev=1,e.next=4,api.cn_transfer({phone:this.cn_trans_phone,cloud_email:this.cn_trans_email});case 4:if(200!==e.sent._code){e.next=9;break}return e.abrupt("return",i.default.accountTransferCompleted());case 9:return e.abrupt("return",i.default.accountTransferFailed());case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),utils.toast.show("账号迁移发生错误");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(81))&&r.__esModule?r:{default:r};function a(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var s=loadI18nextAsync(["error"]);t.default=Vue.component("",(function(){return s.then((function(e){return{template:"#delete-account",computed:{isTeamMember:function(){return this.$store.getters["subscriptions/isTeamMember"]}},mounted:function(){window.location.hash="#setting/delete-account"},methods:{deleteAccount:function(){var t=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("cn"!==window.siteMode){t.next=2;break}return t.abrupt("return",utils.toast.show("Something goes wrong"));case 2:if(!this.isTeamMember){t.next=7;break}return t.next=5,i.default.deleteAccountWarningConfirm();case 5:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:i.default.deleteAccount(function(){var t=a(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,api.deleteAccount($.xmMd5(n));case 4:return t.next=6,t.sent;case 6:if(200===t.sent._code){t.next=10;break}return utils.toast.show(e.t("error._got_a_problem")),t.abrupt("return");case 10:return $acc.signOut(),setTimeout((function(){return i.default.deleteAccountCompleted()}),0),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(113);function i(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var a=loadI18nextAsync(["account","error"]);t.default=Vue.component("",(function(){return a.then((function(e){return{template:"#change-email",directives:{"button-loading":r.buttonLoading},data:function(){return{mode:"readonly",emailVerifying:"",saving:!1,profileSnapshot:{},primaryEmail:""}},mounted:function(){this.profileSnapshot=Object.assign({},this.$store.getters["profile/snapshot"]),this.primaryEmail=this.profileSnapshot.primary_email,window.location.hash="#setting/change-email"},computed:{isPrimaryEmailVerified:function(){var e=this;return(this.profileSnapshot.emails||[]).some((function(t){return t.email===e.profileSnapshot.primary_email&&t.valid}))},hasAlterEmail:function(){return"en"===siteMode&&this.profileSnapshot.emails&&this.profileSnapshot.emails.length>1},siteMode:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return siteMode}))},watch:{primaryEmail:function(e,t){this.profileSnapshot.primary_email=e,this.profileSnapshot.emails.forEach((function(n){n.email===t&&(n.email=e)}))}},methods:{sendVerifyEmail:function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.emailVerifying=n,t.next=3,api.verifyEmail(this.profileSnapshot.user,n);case 3:r=t.sent,this.emailVerifying="",200===r._code?utils.toast.show(e.t("account._email_sent")):utils.toast.show(e.t("error._got_a_problem"));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),save:function(){var t=i(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(utils.regex.email.test(this.profileSnapshot.primary_email)){t.next=2;break}return t.abrupt("return",utils.toast.show(e.t("account._failed_invalid_email")));case 2:return this.saving=!0,n=new Set,r=[],this.profileSnapshot.emails.forEach((function(e){!n.has(e.email)&&e.email&&utils.regex.email.test(e.email)&&(n.add(e.email),r.push({email:e.email}))})),t.next=8,api.saveEmailChanges(this.profileSnapshot.user,this.profileSnapshot.primary_email,r);case 8:i=t.sent,this.saving=!1,200===i._code?(utils.toast.show(e.t("error.Success")),setTimeout((function(){return location.reload()}),2e3)):400===i._code?utils.toast.show(e.t("account._email_address_used")):utils.toast.show(e.t("error._got_a_problem"));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),addEmail:function(){this.profileSnapshot.emails=this.profileSnapshot.emails.concat([{valid:0,email:""}])},deleteEmail:function(e){this.profileSnapshot.emails.splice(e,1)},updateEmail:function(e,t){this.profileSnapshot.emails[e].email=t.target.value}}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(113),i=loadI18nextAsync(["account","error"]);t.default=Vue.component("",(function(){return i.then((function(e){return{template:"#set-newsletter",directives:{"button-cd":r.buttonCD,"button-loading":r.buttonLoading},data:function(){return{isSaving:!1,profileSnapshot:{},btncd:null}},mounted:function(){this.profileSnapshot=Object.assign({},this.$store.getters["profile/snapshot"]),this.profileSnapshot.news_frequency||(this.profileSnapshot.news_frequency=9),this.profileSnapshot.news_language||(this.profileSnapshot.news_language="cn"===window.lang?"cn":"en"),window.location.hash="#setting/set-newsletter"},computed:{},methods:{saveChanges:function(){var t,n=(t=regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isSaving=!0,t.next=3,api.saveProfile(this.profileSnapshot.user,{news_frequency:this.profileSnapshot.news_frequency,news_language:this.profileSnapshot.news_language});case 3:200===t.sent._code?(this.$store.commit("profile/setProfile",this.profileSnapshot),utils.toast.show(e.t("account.Saved"))):utils.toast.show(e.t("error._server_error_try_again_later")),this.isSaving=!1,this.$nextTick((function(){return n.btncd=120}));case 7:case"end":return t.stop()}}),t,this)})),function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(i,a){try{var s=e[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(o)}("next")}))});return function(){return n.apply(this,arguments)}}()}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(84))&&r.__esModule?r:{default:r},a=loadI18nextAsync(["account","error"]);t.default=Vue.component("",(function(){return a.then((function(e){return{template:"#change-password",mixins:[i.default],data:function(){return{oldPassword:"",newPassword1:"",newPassword2:"",saving:!1,passwordMismatched:!1,missingRequiredFiled:!1}},computed:{profile:function(){return this.$store.getters["profile/snapshot"]}},mounted:function(){window.location.hash="#setting/change-password"},methods:{saveChanges:function(){var t,n=(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.newPassword1&&this.newPassword2&&this.newPassword1){t.next=3;break}return this.missingRequiredFiled=!0,t.abrupt("return");case 3:if(!this.newPassword1&&!this.newPassword2||this.newPassword2===this.newPassword1){t.next=6;break}return this.passwordMismatched=!0,t.abrupt("return");case 6:return this.saving=!0,t.next=9,api.changePassword(this.profile.user,$.xmMd5(this.oldPassword),$.xmMd5(this.newPassword1));case 9:n=t.sent,this.saving=!1,200===n._code?(utils.toast.show(e.t("error.Succeed")),$acc.signOut(),location.href="/signin/"):406===n._code?utils.toast.show(e.t("account._old_pwd_incorrect")):utils.toast.show(e.t("error._got_a_problem"));case 12:case"end":return t.stop()}}),t,this)})),function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(i,a){try{var s=e[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(o)}("next")}))});return function(){return n.apply(this,arguments)}}()}}}))}))},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}Object.defineProperty(t,"__esModule",{value:!0}),n(114),t.default=Vue.component("",{template:"#change-phone-number",data:function(){return{step:0,savingPhone:!1,profileSnapshot:{},sendingVerifyPhoneCode:!1,sendingVerifyPhoneCodeCountDown:0,verifyingPhoneCode:!1,sendingNewVerifyPhoneCode:!1,sendingNewVerifyPhoneCodeCountDown:0}},mounted:function(){window.location.hash="#setting/change-phone-number",this.profileSnapshot=Object.assign({},this.$store.getters["profile/snapshot"]),this.isVerifiedPhone||(this.step=2)},computed:{isVerifiedPhone:function(){return"verified"===this.profileSnapshot.phone_status}},methods:{startEdit:function(){this.step=this.isVerifiedPhone?1:2},sendVerifyPhoneCode:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.sendingVerifyPhoneCodeCountDown>0)){e.next=2;break}return e.abrupt("return");case 2:return this.sendingVerifyPhoneCode=!0,e.next=5,api.verifyPhone(this.profileSnapshot.user);case 5:return e.next=7,e.sent;case 7:t=e.sent,this.sendingVerifyPhoneCode=!1,200===t._code?(this.sendingVerifyPhoneCodeCountDown=60,n=setInterval((function(){r.sendingVerifyPhoneCodeCountDown--,r.sendingVerifyPhoneCodeCountDown<=0&&clearInterval(n)}),1e3)):utils.toast.show("发送验证码错误");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),checkVerifyPhoneCode:function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(6!==t.length){e.next=9;break}return this.verifyingPhoneCode=!0,e.next=4,api.verifyCode(this.profileSnapshot.user,t);case 4:n=e.sent,this.verifyingPhoneCode=!1,200===n._code?this.step=2:utils.toast.show("验证码错误"),e.next=10;break;case 9:utils.toast.show("请输入正确的验证码");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),sendNewPhoneCode:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.sendingNewVerifyPhoneCode||this.sendingNewVerifyPhoneCodeCountDown>0)){e.next=2;break}return e.abrupt("return");case 2:if(this.sendingNewVerifyPhoneCode=!0,n=void 0,!this.isVerifiedPhone){e.next=10;break}return e.next=7,api.sendNewPhoneCode(this.profileSnapshot.user,t);case 7:n=e.sent,e.next=13;break;case 10:return e.next=12,api.verifyNewPhone(this.profileSnapshot.user,t);case 12:n=e.sent;case 13:this.sendingNewVerifyPhoneCode=!1,200===n._code?(this.sendingNewVerifyPhoneCodeCountDown=60,r=setInterval((function(){i.sendingNewVerifyPhoneCodeCountDown--,i.sendingNewVerifyPhoneCodeCountDown<=0&&clearInterval(r)}),1e3)):406===n._code?utils.toast.show("手机号已被使用"):utils.toast.show("错误");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),done:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.savingPhone=!0,i=void 0,!this.isVerifiedPhone){e.next=8;break}return e.next=5,api.resetPhone(this.profileSnapshot.user,r,n,t);case 5:i=e.sent,e.next=11;break;case 8:return e.next=10,api.verifyNewPhoneCode(this.profileSnapshot.user,t,n);case 10:i=e.sent;case 11:this.savingPhone=!1,200===i._code?utils.Dialog.alert("修改成功！",(function(){location.reload()})):utils.toast.show("修改失败，请检查验证码是否正确");case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(124),a=(r=n(84))&&r.__esModule?r:{default:r};function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var o=loadI18nextAsync(["account","error"]);t.default=Vue.component("",(function(){return o.then((function(e){return{mixins:[a.default],data:function(){return{saving:!1,months:["january","february","march","april","may","june","july","august","september","october","november","december"],profileSnapshot:{},avatarBlob:void 0,avatarBase64:void 0}},template:"#personal-info",components:{"image-cropper":i.ImageCropperComponent},mounted:function(){this.profileSnapshot=this.$store.getters["profile/snapshot"],window.location.hash="#setting/personal-info"},computed:{currentYear:function(){return(new Date).getFullYear()+1},avatar:function(){return this.avatarBase64?this.avatarBase64:this.$store.getters["profile/avatar"]}},methods:{datesOfMonth:function(e,t){return 2===t?e%4==0&&e%100!=0||e%400==0?29:28:[1,3,5,7,8,10,12].indexOf(t)>=0?31:30},saveChanges:function(){var t=s(regeneratorRuntime.mark((function t(){var n,r,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.saving=!0,!this.avatarBlob){t.next=8;break}return(n=new FormData).append("avatar",this.avatarBlob,$acc._account+".jpg"),t.next=6,api.saveAvatar(n);case 6:200===(r=t.sent)._code?(this.profileSnapshot.avatar_url=r.avatar_url,this.$store.commit("profile/setAvatar",this.avatarBase64)):utils.toast.show(e.t("error._got_a_problem"));case 8:return i={},Object.keys(this.profileSnapshot).forEach((function(e){null!==a.profileSnapshot[e]&&void 0!==a.profileSnapshot[e]&&(i[e]=a.profileSnapshot[e])})),t.next=12,api.saveProfile(this.profileSnapshot.user,JSON.parse(JSON.stringify(i)));case 12:200===t.sent._code?(this.$store.commit("profile/setProfile",this.profileSnapshot),utils.toast.show(e.t("account.Saved"))):utils.toast.show(e.t("error._got_a_problem")),this.saving=!1;case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),uploadStart:function(){var e=s(regeneratorRuntime.mark((function e(t,n){var r=t.base64,i=t.blob;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.avatarBlob=i,this.avatarBase64=r,n();case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageCropperComponent=void 0;var r=a(n(125)),i=a(n(45));function a(e){return e&&e.__esModule?e:{default:e}}var s={jpg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",psd:"image/photoshop"},o={cn:{hint:"点击，或拖动图片至此处",loading:"正在上传……",noSupported:"浏览器不支持该功能，请使用IE10以上或其他现在浏览器！",success:"上传成功",fail:"图片上传失败",preview:"头像预览",btn:{off:"取消",close:"关闭",back:"上一步",save:"保存"},error:{onlyImg:"仅限图片格式",outOfSize:"单文件大小不能超过 ",lowestPx:"图片最低像素为（宽*高）："}},en:{hint:"Click or drag the file here to upload",loading:"Uploading…",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload success",fail:"Upload failed",preview:"Preview",btn:{off:"Cancel",close:"Close",back:"Back",save:"Save"},error:{onlyImg:"Image only",outOfSize:"Image exceeds size limit: ",lowestPx:"Image's pixel is too low. Expected at least: "}},fr:{hint:"Cliquez ou glissez le fichier ici.",loading:"Téléchargement…",noSupported:"Votre navigateur n'est pas supporté. Utilisez IE10 + ou un autre navigateur s'il vous plaît.",success:"Téléchargement réussit",fail:"Téléchargement echoué",preview:"Aperçu",btn:{off:"Annuler",close:"Fermer",back:"Retour",save:"Enregistrer"},error:{onlyImg:"Image uniquement",outOfSize:"L'image sélectionnée dépasse la taille maximum: ",lowestPx:"L'image sélectionnée est trop petite. Dimensions attendues: "}},de:{hint:"Klick hier oder zieh eine Datei hier rein zum Hochladen",loading:"Hochladen…",noSupported:"Browser wird nicht unterstützt, bitte verwende IE10+ oder andere Browser",success:"Upload erfolgreich",fail:"Upload fehlgeschlagen",preview:"Vorschau",btn:{off:"Abbrechen",close:"Schließen",back:"Zurück",save:"Speichern"},error:{onlyImg:"Nur Bilder",outOfSize:"Das Bild ist zu groß: ",lowestPx:"Das Bild ist zu klein. Mindestens: "}}},c=loadI18nextAsync(["account"]);t.ImageCropperComponent=Vue.component("image-cropper",(function(){return c.then((function(e){return{template:r.default,filters:{reFormatTime:i.default.filters.reFormatTime,translate:function(t){return e.t("account."+t)}},props:{width:{type:Number,default:210},height:{type:Number,default:210},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"}},data:function(){var e=this.imgFormat,t=this.langType,n=this.langExt,r=this.width,i=this.height,a=!0,c=-1===["jpg","png"].indexOf(e)?"jpg":e,u=o[t]?o[t]:o.en,l=s[c];return this.imgFormat=c,n&&Object.assign(u,n),"function"!=typeof FormData&&(a=!1),{activated:!1,mime:l,lang:u,isSupported:a,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,isUploading:!1,progress:0,errorMsg:"",ratio:r/i,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},sourceImgContainer:{width:210,height:210},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,rotateLeft:!1,rotateRight:!1,degree:0,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{sourceImgStyle:function(){var e=this.scale,t=this.sourceImgMasking;return{top:e.y+40+t.y+"px",left:e.x+40+t.x+"px",width:e.width+"px",height:e.height+"px",transform:"rotate("+e.degree+"deg)","-ms-transform":"rotate("+e.degree+"deg)","-moz-transform":"rotate("+e.degree+"deg)","-webkit-transform":"rotate("+e.degree+"deg)","-o-transform":"rotate("+e.degree+"deg)"}},sourceImgMasking:function(){var e=this.width,t=this.height,n=this.ratio,r=this.sourceImgContainer,i=r.width/r.height,a=0,s=0,o=r.width,c=r.height,u=1;return n<i&&(u=r.height/t,o=r.height*n,a=(r.width-o)/2),n>i&&(u=r.width/e,c=r.width/n,s=(r.height-c)/2),{scale:u,x:a,y:s,width:o,height:c}},sourceImgShadeStyle:function(){var e=this.sourceImgMasking,t=this.sourceImgContainer,n=e;return{width:(n.width==t.width?n.width:(t.width-n.width)/2)+"px",height:(n.height==t.height?n.height:(t.height-n.height)/2)+"px"}}},watch:{activated:function(e,t){}},methods:{riseError:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activated=!t,this.$emit("error",e)},on:function(){this.$refs.fileinput.value=null,this.$refs.fileinput.click()},off:function(){this.activated=!1,this.reset()},preventDefault:function(e){return e.preventDefault(),!1},onFileChange:function(e){e.preventDefault();var t=e.target.files||e.dataTransfer.files;this.reset(),this.checkFile(t[0])&&(this.setSourceImg(t[0]),this.activated=!0)},checkFile:function(e){var t=this.lang,n=this.maxSize;return-1===e.type.indexOf("image")?(this.errorMsg=t.error.onlyImg,this.riseError(this.errorMsg),!1):!(e.size/1024>n&&(this.errorMsg=t.error.outOfSize+n+"kb",this.riseError(this.errorMsg),1))},reset:function(){this.isUploading=!1,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(e){var t=this,n=new FileReader;n.onload=function(e){t.sourceImgUrl=n.result,t.startCrop()},n.readAsDataURL(e)},startCrop:function(){var e=this,t=e.width,n=e.height,r=e.ratio,i=e.scale,a=e.sourceImgUrl,s=e.sourceImgMasking,o=e.lang,c=s,u=new Image;u.src=a,u.onload=function(){var a=u.naturalWidth,s=u.naturalHeight,l=a/s,d=c.width,f=c.height,m=0,p=0;if(a<t||s<n)return e.errorMsg=o.error.lowestPx+t+"*"+n,e.riseError(e.errorMsg),!1;r>l&&(f=d/l,p=(c.height-f)/2),r<l&&(d=f*l,m=(c.width-d)/2),i.range=0,i.x=m,i.y=p,i.width=d,i.height=f,i.degree=0,i.minWidth=d,i.minHeight=f,i.maxWidth=a*c.scale,i.maxHeight=s*c.scale,i.naturalWidth=a,i.naturalHeight=s,e.sourceImg=u,e.createImg()}},imgStartMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,n=this.sourceImgMouseDown,r=this.scale,i=n;i.mX=t.screenX,i.mY=t.screenY,i.x=r.x,i.y=r.y,i.on=!0},imgMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,n=this.sourceImgMouseDown,r=n.on,i=n.mX,a=n.mY,s=n.x,o=n.y,c=this.scale,u=this.sourceImgMasking,l=s+(t.screenX-i),d=o+(t.screenY-a);r&&(l>0&&(l=0),d>0&&(d=0),l<u.width-c.width&&(l=u.width-c.width),d<u.height-c.height&&(d=u.height-c.height),c.x=l,c.y=d)},startZoomAdd:function(e){var t=this,n=t.scale;n.zoomAddOn=!0,function e(){if(n.zoomAddOn){var r=n.range>=100?100:++n.range;t.zoomImg(r),setTimeout((function(){e()}),60)}}()},endZoomAdd:function(e){this.scale.zoomAddOn=!1},startZoomSub:function(e){var t=this,n=t.scale;n.zoomSubOn=!0,function e(){if(n.zoomSubOn){var r=n.range<=0?0:--n.range;t.zoomImg(r),setTimeout((function(){e()}),60)}}()},endZoomSub:function(e){this.scale.zoomSubOn=!1},zoomChange:function(e){this.zoomImg(e.target.value)},zoomImg:function(e){var t=this,n=this.sourceImgMasking,r=(this.sourceImgMouseDown,this.scale),i=r.maxWidth,a=r.maxHeight,s=r.minWidth,o=r.minHeight,c=r.width,u=r.height,l=r.x,d=r.y,f=(r.range,n),m=f.width,p=f.height,h=s+(i-s)*e/100,v=o+(a-o)*e/100,g=m/2-h/c*(m/2-l),_=p/2-v/u*(p/2-d);g>0&&(g=0),_>0&&(_=0),g<m-h&&(g=m-h),_<p-v&&(_=p-v),r.x=g,r.y=_,r.width=h,r.height=v,r.range=e,setTimeout((function(){r.range===e&&t.createImg()}),300)},createImg:function(e){var t=this.mime,n=this.sourceImg,r=this.scale,i=r.x,a=r.y,s=r.width,o=r.height,c=(r.degree,this.sourceImgMasking.scale),u=this.$refs.canvas,l=u.getContext("2d");e&&(this.sourceImgMouseDown.on=!1),u.width=this.width,u.height=this.height,l.clearRect(0,0,this.width,this.height),l.fillStyle="#fff",l.fillRect(0,0,this.width,this.height),l.drawImage(n,i/c,a/c,s/c,o/c),this.createImgUrl=u.toDataURL(t)},prepareUpload:function(){var e=this.url,t=this.createImgUrl,n=this.field,r=this.ki;this.$emit("crop",t,n,r),"string"==typeof e&&e?this.upload():this.off()},upload:function(){var e=this;if(!this.isUploading){var t=this.mime,n=this.createImgUrl;this.isUploading=!0,this.$emit("upload",{base64:n,blob:function(e,t){e=e.split(",")[1],e=window.atob(e);for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return new Blob([n],{type:t})}(n,t)},(function(){e.isUploading=!1,e.activated=!1}))}}},created:function(){var e=this;this.$on("error",(function(e){alert(e)})),document.addEventListener("keyup",(function(t){!e.activated||"Escape"!=t.key&&27!=t.keyCode||e.off()}))}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n<div class="image-cropper" v-show="activated" >\n    <div class="image-cropper__body">\n        <div class="image-cropper__close" @click="off()" v-show="!isUploading">\n            <span class="icon-cross"></span>\n        </div>\n        <div>\n            <strong>{{ "Upload a profile photo" | translate }}</strong>\n        </div>\n        <div class="d-block d-md-flex mt-3">\n            <div class="img-cropper__img-wrapper flex-shrink-0">\n                <img :src="sourceImgUrl" :style="sourceImgStyle" draggable="false" ref="img">\n                <div class="img-cropper__img-mask-border"\n                     @touchstart="imgStartMove"\n                     @touchmove="imgMove"\n                     @touchend="createImg"\n                     @touchcancel="createImg"\n                     @mousedown="imgStartMove"\n                     @mousemove="imgMove"\n                     @mouseup="createImg"\n                     @mouseout="createImg"></div>\n                <div class="img-cropper__img-mask-left"></div>\n                <div class="img-cropper__img-mask-right"></div>\n                <div class="img-cropper__img-mask-top"></div>\n                <div class="img-cropper__img-mask-bottom"></div>\n            </div>\n            <div class="img-cropper__img-preview ml-3 d-flex d-md-block">\n                <div class="img-cropper__img-preview-wrapper flex-shrink-0 mt-3 mt-md-0 mr-3 mr-md-0">\n                    <img :src="createImgUrl">\n                </div>\n                <div class="img-cropper__img-range d-flex d-md-none justify-content-center align-items-center mt-3">\n                    <span class="icon-minus mb-0 mt-mt-2 mr-2 ml-md-0" @mousedown="startZoomSub" @mouseout="endZoomSub" @mouseup="endZoomSub"></span>\n                    <input type="range" :value="scale.range" step="2" min="0" max="100" @input="zoomChange" class="custom-range">.\n                    <span class="icon-plus mt-0 mt-md-2 ml-2 mr-md-0"  @mousedown="startZoomAdd" @mouseout="endZoomAdd" @mouseup="endZoomAdd"></span>\n                </div>\n                <div class="img-cropper__img-range d-none d-md-flex flex-column-reverse justify-content-center align-items-center mt-3">\n                    <span class="icon-minus mb-0 mt-mt-2 ml-2 ml-md-0" @mousedown="startZoomSub" @mouseout="endZoomSub" @mouseup="endZoomSub"></span>\n                    <input type="range" :value="scale.range" step="2" min="0" max="100" @input="zoomChange" class="custom-range">\n                    <span class="icon-plus mt-0 mt-md-2 mr-2 mr-md-0"  @mousedown="startZoomAdd" @mouseout="endZoomAdd" @mouseup="endZoomAdd"></span>\n                </div>\n            </div>\n        </div>\n\n        <div class="img-cropper__operation text-right mt-5">\n            <a class="btn btn-link img-cropper__operation-cancel" @click="off()" :class="{disabled: isUploading}" :disabled="isUploading">\n                {{ "Cancel" | translate }}\n            </a>\n            <button class="btn btn-primary img-cropper__operation-upload" @click="upload()" :disabled="isUploading">\n                <span v-show="!isUploading">\n                   {{ "Upload" | translate }}\n                </span>\n                <div class="waiting loading" v-show="isUploading">\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                </div>\n                <span>&nbsp</span>\n            </button>\n        </div>\n    </div>\n    <div v-show="false">\n        <canvas  :width="width" :height="height" ref="canvas"></canvas>\n        <input type="file" @change="onFileChange" ref="fileinput" accept=".jpg, .jpeg, .png, .gif">\n    </div>\n</div>\n\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=loadI18nextAsync(["account","error"]);t.default=Vue.component("",(function(){return r.then((function(e){return{template:"#change-third-part",data:function(){return{linkUrlWechat:"https://open.weixin.qq.com/connect/qrconnect?appid=wxb622429f803e96ba&redirect_uri="+location.origin+"/_res/social_account/wx/login&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect",linkUrlWeibo:"https://api.weibo.com/oauth2/authorize?client_id=1037972127&response_type=code&redirect_uri="+location.origin+"/_res/social_account/weibo/login",linkUrlQQ:"https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=101420074&redirect_uri="+location.origin+"/_res/social_account/qq/login&scope=get_user_info"}},mounted:function(){window.location.hash="#setting/change-third-part"},computed:{profile:function(){return this.$store.getters["profile/snapshot"]},social_accounts:function(){return this.profile.social_accounts||{}},isBindingWechat:function(){return!!this.social_accounts.wx},isBindingWeibo:function(){return!!this.social_accounts.weibo},isBindingQQ:function(){return!!this.social_accounts.qq},isBindingGoogle:function(){return!!this.social_accounts.google},isBindingFacebook:function(){return!!this.social_accounts.facebook},isBindingMicrosoft:function(){return!!this.social_accounts.microsoft}},methods:{unlink:function(t){utils.Dialog.confirm(e.t("account._r_u_sure_unlink"),(function(n){$.post("/_res/social_account/"+t+"/unbind").fail((function(){n.hide(),utils.toast.show("something wrong")})).done((function(t){200===t._code?(n.hide(),utils.Dialog.alert(e.t("account._unlink_success"),(function(e){e.hide(),location.reload()}))):utils.toast.show("something wrong")}))}),(function(e){e.hide()}))}}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(128)),i=s(n(81)),a=s(n(45));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var c=loadI18nextAsync(["account"]);t.default=Vue.component("",(function(){return c.then((function(e){return{template:"#team-subscription",computed:Object.assign({},Vuex.mapGetters({profile:"profile/snapshot",members:"team/members",memberWithEmptySeats:"team/memberWithEmptySeats",team:"team/snapshot",isTeamLeader:"subscriptions/isTeamLeader",isAutoRenewable:"team/isAutoRenewable"}),{siteMode:function(){return window.siteMode}}),data:function(){return{isTuningAutoRenewable:!1}},mounted:function(){window.location.hash="#setting/team-subscription",this.isTeamLeader||(this.$parent.currentView="personal-info")},methods:{refreshList:function(){var e=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("team/init");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),inviteMember:function(){var e=o(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.teamSubscriptionInvite(function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.profile.primary_email!==t){e.next=6;break}return e.next=4,api.inviteTeamLeader();case 4:e.next=8;break;case 6:return e.next=8,api.inviteTeamMember(t);case 8:return e.next=10,n.refreshList();case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),a.default.toast.show("Something going not right, try later please.");case 16:case"end":return e.stop()}}),e,n,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),setAutoRenewable:function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isTuningAutoRenewable=!0,e.next=3,api.switchTeamSubscriptionAutoRenew(this.team.team_id,t);case 3:this.isTuningAutoRenewable=!1,window.location.reload();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),revokeAccess:function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.teamSubscriptionRevokeAccess(t.user_email);case 2:if(!e.sent){e.next=8;break}return e.next=5,api.removeTeamMember(t.user_id);case 5:return e.sent,e.next=8,this.refreshList();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),revokeInvitation:function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.teamSubscriptionRevokeAccess(t.user_email);case 2:if(!e.sent){e.next=8;break}return e.next=5,api.cancelTeamMemberInvite(this.team.hash,t.user_email);case 5:return e.sent,e.next=8,this.refreshList();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),deleteTeamSubscription:function(){var t=o(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.teamSubscriptionDeleteConfirm();case 2:if(!t.sent){t.next=20;break}return t.next=5,api.dismissTeam(this.team.team_id);case 5:if(200!==(n=t.sent)._code){t.next=9;break}return window.location.reload(),t.abrupt("return");case 9:console.log("data ->",n),t.t0=n._code,t.next=401===t.t0?13:403===t.t0?15:404===t.t0?17:19;break;case 13:return window.$xm.redirect(),t.abrupt("return");case 15:return alert(e.t("account._only_team_leader_can_do")),t.abrupt("return");case 17:return alert(e.t("error._subscription_not_found_or_expired")),t.abrupt("return");case 19:alert(e.t("error._server_error_try_again_later"));case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},filters:{reFormatTime:a.default.filters.reFormatTime,translate:function(t){return e.t("account."+t)}},components:{TeamSubscriptionMemberCard:r.default}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(129)),i=a(n(45));function a(e){return e&&e.__esModule?e:{default:e}}var s=loadI18nextAsync(["account"]);t.default=Vue.component("TeamSubscriptionMemberCard",(function(){return s.then((function(e){return{template:r.default,props:{member:{type:Object},isLeader:{default:!1,type:Boolean}},filters:{reFormatTime:i.default.filters.reFormatTime,translate:function(t){return e.t("account."+t)}},computed:{avatar:function(){return this.member.avatar_url?this.member.avatar_url:"cn"===window.siteMode?"//s3.cn-north-1.amazonaws.com.cn/assets.xmind.cn/img/default-avatar.png":"//xmindnet.s3.amazonaws.com/img/default-avatar.png"},isEmpty:function(){return!this.member||this.member.isEmpty},isInvited:function(){return!this.isEmpty&&!this.member.accept},isJoined:function(){return!this.isEmpty&&this.member.accept}},methods:{dispatch:function(){this.isEmpty?this.inviteMember():this.isInvited?this.revokeInvitation():this.isJoined&&this.revokeAccess()},revokeAccess:function(){this.$emit("revoke-access",this.member)},revokeInvitation:function(){this.$emit("revoke-invitation",this.member)},inviteMember:function(){this.$emit("invite-member",this.member)}}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n<div class="team-subscription__member-card col-12 col-sm-12 col-md-6 col-lg-4">\n    <div class="team-subscription__member-card-wrapper d-flex flex-column justify-content-center align-items-center position-relative" \n        :class="{\'team-subscription__member-card__not-accepted\': isInvited,\n                 \'team-subscription__member-card__empty\': isEmpty}" >\n\n        <template v-if="member && !member.isEmpty">\n            <div class="team-subscription__member-card-title d-flex align-items-center flex-column justify-content-center">\n                <div class="team-subscription__member-card-avatar position-relative">\n                   <div class="team-subscription__member-card-avatar__wrapper">\n                        <img :src="avatar">\n                   </div>\n                   <div class="team-subscription__member-card-avatar__pending"> \n                       Pending\n                   </div>\n                   <div v-if="isLeader" class="team-subscription__member-card-avatar__owner"> \n                       Owner\n                   </div>\n                </div>\n                <span class="mt-2 team-subscription__member-card-title__user-info">\n                   <span> {{ member.user_email }} </span>\n                </span>\n            </div>\n             <span class="team-subscription__member-card-kick icon-cross" @click="dispatch()"></span>      \n        </template>\n        <template v-else>\n            <div class="w-100 h-100 d-flex justify-content-center align-items-center" @click="dispatch()">\n                <span class="icon-plus"></span>\n            </div>\n        </template>\n    </div>\n</div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(18)),i=o(n(81)),a=o(n(131)),s=o(n(133));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var u={zen:{cancel:0,expireTime:1564734053e3,status:"trial",type:"indi"},ios:{cancel:0,expireTime:1564734053e3,status:"sub",type:"indi"},bundle:{cancel:0,expireTime:1564734053e3,status:"sub",type:"indi"},team:{ios:{bind_version:"ios",status:"trial",leader_name:"",leader_id:"6",expireTime:1577503676e3,cancel:0,leader_email:"380526183@qq.com"},zen:{bind_version:"zen",status:"trial",leader_name:"",leader_id:"6",expireTime:1577503676e3,cancel:0,leader_email:"380526183@qq.com"},bundle:{bind_version:"bundle",status:"trial",leader_name:"",leader_id:"6",expireTime:1577503676e3,cancel:0,leader_email:"380526183@qq.com"}},_code:200};t.default=Vue.component("",{template:"#management",computed:Object.assign({},Vuex.mapGetters({profile:"profile/snapshot",displayName:"profile/displayName",isDefaultName:"profile/isDefaultName",isPrimaryEmailVerified:"profile/isPrimaryEmailVerified",hasBundleProduct:"subscriptions/hasBundleProduct",avatar:"profile/avatar",isTeamLeader:"subscriptions/isTeamLeader",isTeamMember:"subscriptions/isTeamMember",subscriptions:"subscriptions/subscriptions"}),{primaryEmail:function(){return this.$store.state.profile.profile.primary_email},devices:function(){return this.$store.state.devices.list}}),components:{SubscriptionItemComponent:a.default,DeviceItemComponent:s.default},data:function(){return{devTeamModeData:!1,devIsTeamLeader:!1,devModeProd:"bundle"}},methods:{forceUpdateForDebugger:function(e,t){var n=this.devModeProd||"bundle";if(this.devTeamModeData){var r=u.team;r[n].status=e||r[n].status,t&&(r[n].autorenewable=0===r[n].autorenewable?1:0),this.devIsTeamLeader?r[n].leader_id=this.$store.state.profile.profile.userid:r[n].leader_id="cat"}else{var i=u;i[n].status=e||i[n].status,t&&(i[n].cancel=0===i[n].cancel?1:0)}this.$store.commit("subscriptions/assignSubscriptions",u)},formatTime:function(e){return"cn"===lang?(0,r.default)(e,{locale:"zh-cn"}).format("YYYY年MMMD日"):(0,r.default)(e).format("MMMM D, YYYY")},cancelSubscription:function(e){return i.default.managementCancelSubscription(this.formatTime(e.expireTime),this.profile.user,e.product)},deactivateDevice:function(e,t){return i.default.managementDeactivatedDevice(e,t)},goto:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pricing";window.open(window.location.origin+e,"_blank")},goToEditProfile:function(){window.location.hash="setting/personal-info",this.$store.commit("setActivatedView","setting")},gotoManageTeam:function(){window.location.hash="setting/team-subscription",this.$store.commit("setActivatedView","setting")},goToChangeEmail:function(){window.location.hash="setting/change-email",this.$store.commit("setActivatedView","setting")},turnOffAutoRenew:function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,api.switchTeamSubscriptionAutoRenew(t.team_id,"off");case 2:window.location.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),turnOnAutoRenew:function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,api.switchTeamSubscriptionAutoRenew(t.team_id,"on");case 2:window.location.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),leaveTeam:function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.teamSubscriptionLeavingConfirm();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,api.leaveTeam(t.team_id);case 6:window.location.reload();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(132)),i=a(n(45));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}var o=loadI18nextAsync(["account","error"]);t.default=Vue.component("SubscriptionItemComponent",(function(){return o.then((function(e){return{template:r.default,computed:{lang:function(){return window.lang},siteMode:function(){return window.siteMode},i18n:function(){return window.i18n},isAutoRenewable:function(){return this.subscription&&i.default.isAutoRenewAble(this.subscription.gateway)}},props:{subscription:{required:!0},isTeamLeader:{default:!1}},data:function(){return{isDevicesListExpanded:!1}},filters:{reFormatTime:i.default.filters.reFormatTime,translate:function(t){return e.t("account."+t)}},methods:{cancelSubscription:function(e){this.$emit("cancelSubscription",e)},deactivateDevice:function(e,t){this.$emit("deactivateDevice",{deviceId:e,deviceName:t})},turnOnAutoRenew:function(){this.$emit("turnOnAutoRenew",this.subscription)},turnOffAutoRenew:function(){this.$emit("turnOffAutoRenew",this.subscription)},goto:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pricing";window.open(window.location.origin+e,"_blank")},updateCreditCard4Individual:function(){var t=s(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,api.updateCreditCard4Individual(n);case 2:if(200!==(r=t.sent)._code||!r.link){t.next=6;break}return location.href=r.link,t.abrupt("return");case 6:console.log("data ->",r),t.t0=r._code,t.next=403===t.t0?10:404===t.t0?10:401===t.t0?12:14;break;case 10:return alert(e.t("error._subscription_not_found_or_expired")),t.abrupt("return");case 12:return window.$xm.redirect(),t.abrupt("return");case 14:alert(e.t("error._server_error_try_again_later"));case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),updateCreditCard4Team:function(){var t=s(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,api.updateCreditCard4Team(n);case 2:if(200!==(r=t.sent)._code||!r.link){t.next=6;break}return location.href=r.link,t.abrupt("return");case 6:console.log("data ->",r),t.t0=r._code,t.next=403===t.t0?10:404===t.t0?10:401===t.t0?12:14;break;case 10:return alert(e.t("error._subscription_not_found_or_expired")),t.abrupt("return");case 12:return window.$xm.redirect(),t.abrupt("return");case 14:alert(e.t("error._server_error_try_again_later"));case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),renewTeamSubscription:function(){var t=s(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,api.renewTeamSubscription(n);case 2:if(200!==(r=t.sent)._code||!r.link){t.next=6;break}return location.href=r.link,t.abrupt("return");case 6:console.log("data ->",r),t.t0=r._code,t.next=403===t.t0?10:404===t.t0?10:401===t.t0?12:14;break;case 10:return alert(e.t("error._subscription_not_found_or_expired")),t.abrupt("return");case 12:return window.$xm.redirect(),t.abrupt("return");case 14:alert(e.t("error._server_error_try_again_later"));case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n<div class="subscription__product" :class="{team: subscription.runtimeInfo.isTeam}">\n    <div class="col-md-4 d-flex flex-nowrap d-md-flex pl-0">\n        <div class="subscription__product-name text-nowrap">\n            <h6 class="d-inline-block"> {{ subscription.runtimeInfo.name }} </h6>\n            <small v-if="subscription.runtimeInfo.isTeam" class="subscription__product-name__marker">\n                {{ "Multi-User" | translate }}\n            </small>\n        </div>\n    </div>\n\n    <div v-if="!subscription.runtimeInfo.isTeam" class="col-md-4 d-flex flex-nowrap d-md-block mt-2 mt-md-0 pl-0 pl-lg-4">\n        \x3c!--激活状态--\x3e\n        <div v-if="subscription.status ===\'sub\'" class="subscription__activated" >\n            <div class="subscription__management-status mb-2">\n                {{ "Activated" | translate }}\n            </div>\n            <div v-if="siteMode === \'cn\'" class="subscription__management-time mb-2">\n                {{ "Expired At" | translate }} {{subscription.expireTime | reFormatTime}}\n            </div>\n            <template v-else>\n                <template v-if="subscription.cancel === 1">\n                    <div class="mt-2 subscription__management-time mb-2">\n                        {{ "Expired At" | translate }} {{subscription.expireTime | reFormatTime}}\n                    </div>\n                </template>\n                <template v-else>\n                    <div class="subscription__management-time mb-2">\n                        {{ "Next Charge On" | translate }} {{ subscription.expireTime | reFormatTime}}\n                    </div>\n                </template>\n            </template>\n        </div>\n        \x3c!--过期状态--\x3e\n        <div class="subscription__expired" v-else-if="subscription.status ===\'expired\'">\n            <div class="subscription__management-status expired text-danger mb-2">\n                {{ "Expired" | translate }}\n            </div>\n            <div class="subscription__management-time">\n                {{ "Expired At" | translate }} {{ subscription.expireTime | reFormatTime}}\n            </div>\n        </div>\n        \x3c!--试用状态--\x3e\n        <div class="subscription__trial" v-else>\n            <div class="subscription__management-status mb-2">\n                {{ "Trial" | translate }}\n            </div>\n            <div class="subscription__management-time">\n                -\n            </div>\n        </div>\n    </div>\n    <div v-else class="col-md-4 d-flex flex-nowrap d-md-block mt-4 mt-md-0 pl-0 pl-lg-4">\n        \x3c!--激活状态--\x3e\n        <div v-if="subscription.status ===\'sub\'" class="subscription__activated" >\n            <div class="subscription__management-status mb-2">\n                <span v-if="isTeamLeader && !subscription.using">\n                    {{ "Activated" | translate }}\n                </span>\n                <span v-else>\n                    {{ "Using" | translate }}\n                </span>\n            </div>\n            <div v-if="siteMode === \'cn\'" class="subscription__management-time">\n                    {{ "Expired At" | translate }} {{subscription.expireTime | reFormatTime}}\n            </div>\n            <template v-else>\n                <div v-if="subscription.autorenewable === 0" class="subscription__management-time">\n                     {{ "Expired At" | translate }} {{subscription.expireTime | reFormatTime}}\n                </div>\n                 <div v-else class="subscription__management-time subscription__management-time">\n                     {{ "Next Charge On" | translate }} {{ subscription.expireTime | reFormatTime}}\n                 </div>\n            </template>\n        </div>\n        \x3c!--过期状态--\x3e\n        <div class="subscription__expired" v-else-if="subscription.status ===\'expired\'">\n            <div class="subscription__management-status expired text-danger mb-2">\n                {{ "Expired" | translate }}\n            </div>\n            <div class="subscription__management-time">\n                {{ "Expired At" | translate }} {{ subscription.expireTime | reFormatTime}}\n            </div>\n        </div>\n    </div>\n\n    \x3c!--个人订阅--\x3e\n    <div v-if="!subscription.runtimeInfo.isTeam" class="col-12 col-md-4 mt-4 subscription__management mt-md-0 pl-0 pl-lg-5">\n        \x3c!--过期状态--\x3e\n        <div class="subscription__expired mb-3" v-if="subscription.status ===\'expired\'">\n            <button @click="goto(subscription.runtimeInfo.subscribeLink)" class="btn btn-sm btn-primary">\n                {{ "Renew" | translate}}\n            </button>\n        </div>\n        \x3c!--试用状态--\x3e\n        <div class="subscription__trial mb-3" v-else-if="subscription.status ===\'trial\'">\n            <button @click="goto(subscription.runtimeInfo.subscribeLink)" class="btn btn-sm btn-primary">\n                {{ "Buy" | translate }}\n            </button>\n        </div>\n        \x3c!--激活状态--\x3e\n        <div v-else-if="subscription.status ===\'sub\' && siteMode === \'en\'" class="subscription__activated mb-3">\n            <a v-if="subscription.cancel === 1" class="text-dark">\n                \x3c!--{{ "Turn On Auto-Renewal" | translate }}--\x3e\n                {{ "Auto Renewal Cancelled" | translate }}\n            </a>\n            <div v-else>\n                <p class="mb-2">\n                    <a @click="cancelSubscription(subscription)" class="d-inline-block subscription__management-link" href="javascript:;">\n                        {{ "Turn Off Auto-Renewal" | translate }}\n                    </a>\n                </p>\n                <p>\n                    <a @click="updateCreditCard4Individual(subscription.product)" class="d-inline-block subscription__management-link" href="javascript:;">\n                        {{ "_update_credit_card" | translate }}\n                    </a>\n                </p>\n            </div>\n        </div>\n    </div>\n\n    \x3c!--团队订阅--\x3e\n    <div v-else class="col-12 col-md-4 mt-4 subscription__management mt-md-0 pl-0 pl-lg-5">\n        <template v-if="isTeamLeader">\n            <div class="subscription__manage-team">\n                <button @click="$emit(\'manage-team\')" class="btn btn-primary btn-sm mb-3">{{ "Manage" | translate}}</button>\n            </div>\n            \x3c!--过期状态--\x3e\n            <div v-if="subscription.status ===\'expired\'" class="subscription__expired">\n                <button @click="renewTeamSubscription(subscription.team_id)" class="btn btn-sm btn-primary mb-3">\n                    {{ "Renew" | translate}}\n                </button>\n            </div>\n            \x3c!--激活状态--\x3e\n            <div v-else-if="subscription.status ===\'sub\' && siteMode === \'en\' && isAutoRenewable" class="subscription__activated mb-3">\n                <p class="mb-2">\n                    <a v-if="subscription.autorenewable === 0"  @click="turnOnAutoRenew()" class="d-inline-block subscription__management-link" href="javascript:;">\n                        {{ "Turn On Auto-Renewal" | translate }}\n                    </a>\n                    <a v-else @click="turnOffAutoRenew()" class="d-inline-block subscription__management-link" href="javascript:;">\n                        {{ "Turn Off Auto-Renewal" | translate }}\n                    </a>\n                </p>\n                <p>\n                    <a @click="updateCreditCard4Team(subscription.team_id)" class="d-inline-block subscription__management-link" href="javascript:;">\n                        {{ "_update_credit_card" | translate }}\n                    </a>\n                </p>\n            </div>\n        </template>\n        <template v-else>\n            <a class="text-dark" href="javascript:;" @click="$emit(\'leave-team\', subscription)"> {{ "Leave" | translate }} </a>\n        </template>\n    </div>\n</div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(n(18));var r=a(n(134)),i=a(n(45));function a(e){return e&&e.__esModule?e:{default:e}}var s=loadI18nextAsync(["account"]);t.default=Vue.component("DeviceItemComponent",(function(){return s.then((function(e){return{template:r.default,props:{device:{default:function(){return{}}}},filters:{reFormatTime:i.default.filters.reFormatTime,translate:function(t){return e.t("account."+t)}},methods:{deactivateDevice:function(e,t){this.$emit("deactivateDevice",{deviceId:e,deviceName:t})}}}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n<div class="devices__device-item">\n    <div class="devices__device-item-wrapper d-flex justify-content-center flex-column">\n        <div class="d-flex justify-content-between">\n            <h6 class="mb-2"> {{ device.deviceName }} </h6>\n             <a class="d-block d-md-none" href="javascript:;" @click="deactivateDevice(device.deviceId, device.deviceName)">\n                {{ "Logout" | translate }}\n             </a>\n        </div>\n        <div class="devices__device-info">\n            {{ "Last Login At" | translate }} \n            {{ device.lastLoginTime | reFormatTime }}\n            <span v-show="device.lastLoginAddress">\n                , {{ "in" | translate }} \n                {{ device.lastLoginAddress }}\n            </span>\n        </div>\n        <div class="devices__management mt-2">\n            <a class="d-none d-md-block" href="javascript:;" @click="deactivateDevice(device.deviceId, device.deviceName)">\n                {{ "Logout" | translate }}\n            </a>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(136)),i=o(n(138)),a=o(n(114)),s=o(n(139));function o(e){return e&&e.__esModule?e:{default:e}}t.default=new Vuex.Store({state:{isReady:!1,activatedView:""},modules:{devices:r.default,subscriptions:i.default,profile:a.default,team:s.default},mutations:{setReady:function(e,t){e.isReady=t},setActivatedView:function(e,t){e.activatedView=t}},actions:{init:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n=t.dispatch,r=t.rootGetters,i=t.commit;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n("devices/init"),n("subscriptions/init"),n("profile/init")]);case 2:if(!r["subscriptions/isTeamLeader"]){e.next=5;break}return e.next=5,n("team/init");case 5:i("setReady",!0);case 6:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))});return function(e){return t.apply(this,arguments)}}()}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(137);var r,i=n(85);function a(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}(r=n(18))&&r.__esModule,t.default={namespaced:!0,state:{list:[]},mutations:{},actions:{init:function(){var e=a(regeneratorRuntime.mark((function e(t){t.commit;var n,r=t.dispatch;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,api.getDevicesInfo();case 2:n=e.sent,r("locateDevice",n.devices||[]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),locateDevice:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r=t.state;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.list=n.map((function(e){return(0,i.getGeoIP)(e.lastLoginIp).then((function(t){return e.lastLoginAddress=t.city?t.city:t.country})),e}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}}},function(e,t,n){e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e){return e},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"}};return e.locale(t,null,!0),t}(n(18))},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))}}Object.defineProperty(t,"__esModule",{value:!0});var i=loadI18nextAsync(["account","error"]);t.default={namespaced:!0,state:{rawResponse:{},teamSubscriptions:[],personalSubscriptions:[]},getters:{isTeamLeader:function(e,t,n){var r=n.profile.profile.userid;return e.teamSubscriptions.some((function(e){return String(e.leader_id)===String(r)}))},isTeamMember:function(e,t){return t.subscriptions.some((function(e){return e.runtimeInfo.isTeam}))},hasBundleProduct:function(e){return e.personalSubscriptions.some((function(e){return"bundle"===e.product&&"sub"===e.status}))},subscriptions:function(e,t){var n=e.personalSubscriptions,r=e.teamSubscriptions,i=n.filter((function(e){return"expired"===e.status})),a=n.some((function(e){return"bundle"===e.product&&"expired"===e.status})),s=n.some((function(e){return"zen"===e.product&&"sub"===e.status})),o=n.some((function(e){return"ios"===e.product&&"sub"===e.status}));a&&s&&o&&(i=i.filter((function(e){return"bundle"!==e.product})));var c=[];n.some((function(e){return"bundle"===e.product&&("sub"===e.status||"expired"===e.status)}))||(c=n.filter((function(e){return["zen","ios"].includes(e.product)&&"trial"===e.status})));var u=n.filter((function(e){return"sub"===e.status})),l=r.filter((function(e){return"sub"===e.status||"expired"===e.status})),d=[];return[u,c,i].forEach((function(e){["bundle","zen","ios"].forEach((function(t){var n=e.find((function(e){return e.product===t}));n&&d.push(n)}))})),l.concat(d)}},mutations:{assignSubscriptions:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,a,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,a="en"===lang||"cn"===lang?"/":"/"+lang+"/",e.t0={name:"XMind 2020",subscribeLink:a+"buy/xmind/?key_version=90&version=zen&autorenew=6",downloadLink:"/xmind/download/"},e.next=5,i;case 5:return e.t1=e.sent.t("account.XMind for Mobile"),e.t2=a+"buy/xmind/?key_version=90&version=ios&autorenew=6",e.t3={name:e.t1,subscribeLink:e.t2,downloadLink:"/download/mobile/"},e.next=10,i;case 10:e.t4=e.sent.t("account.Mobile"),e.t5="XMind 2020 + "+e.t4,e.t6=a+"buy/xmind/?key_version=90&version=bundle&autorenew=6",e.t7={name:e.t5,subscribeLink:e.t6,downloadLink:"/download/"},s={zen:e.t0,ios:e.t3,bundle:e.t7},o=Object.keys(s),t.personalSubscriptions=o.map((function(e){var t=r[e]||{};return{product:e,status:t.status||"trial",expireTime:t.expireTime||0,cancel:t.cancel||0,runtimeInfo:Object.assign({isTeam:!1},s[e])}})),r.team&&(t.teamSubscriptions=o.map((function(e){var t=r.team[e]||{};return Object.assign(t,{product:e,runtimeInfo:Object.assign({isTeam:!0},s[e])})})));case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},actions:{init:function(){var e=r(regeneratorRuntime.mark((function e(t){t.state;var n=t.commit;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,api.getSubscriptionInfo();case 3:e.t1=e.sent,(0,e.t0)("assignSubscriptions",e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(45))&&r.__esModule?r:{default:r};t.default={namespaced:!0,state:{team_size:0,team_members:[]},getters:{members:function(e){return e.team_members&&e.team_members.length&&e.team_members.slice()||[]},snapshot:function(e){var t=Object.assign({},e);return delete t.team_members,t},memberWithEmptySeats:function(e,t){for(var n=t.members.slice(),r=0;r<e.team_size-e.team_members.length;r++)n.push({isEmpty:!0});return n},isAutoRenewable:function(e){return i.default.isAutoRenewAble(e.gateway)}},mutations:{setTeam:function(e,t){Object.keys(t).forEach((function(n){return Vue.set(e,n,t[n])}))}},actions:{init:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r=t.commit;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,api.getTeamInfo();case 2:n=e.sent,r("setTeam",n);case 4:case"end":return e.stop()}}),e,this)})),function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(o)}("next")}))});return function(e){return t.apply(this,arguments)}}()}}}]);